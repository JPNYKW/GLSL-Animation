<!DOCTYPE html>
<html>
      <head>
            <meta charset="utf-8">
            <title>GLSL Template</title>
            <link rel="stylesheet" href="style.css">
      </head>

      <body>
            <p><canvas id="webgl-canvas"></canvas></p>

            <p>
                  <input value="0.4" placeholder="彩度"><br>
                  <input value="0.05" placeholder="光の強さ"><br>
                  <button id="a">反映</button>
            </p>

            <script id="fs" type="x-shader/x-fragment">
                  precision mediump float;
                  uniform float t;
                  uniform vec2  r;

                  /*
                  // there's define numbers to uniform.
                  #define sat 0.4
                  #define check 1.0
                  #define l_size 0.05
                  */

                  uniform float sat;
                  uniform float check;
                  uniform float l_size;

                  uniform float red;
                  uniform float blue;
                  uniform float green;

                  float f(float size, float x, float y) {
                        x = floor((x / size) + 0.5);
                        y = floor((y / size) + 0.5);
                        return x + y * (512.0 / size) + mod(y, 2.0) * check;
                  }

                  void main(void){
                        vec2 p = (gl_FragCoord.xy * 2.0 - r) / min(r.x, r.y);
                        float n = mod(f(16.0, gl_FragCoord.x + t * 32.0, gl_FragCoord.y), 2.0);
                        float l = l_size / length(p);

                        // from top r, g, b.
                        // gl_FragColor = vec4(vec3(sat + l, vec2(l)) + n, 1.0);
                        // gl_FragColor = vec4(vec3(l, sat + l, l) + n, 1.0);
                        // gl_FragColor = vec4(vec3(vec2(l), sat + l) + n, 1.0);

                        float x = l + n;
                        float y = sat + l;

                        gl_FragColor = vec4(
                              x + y * red,
                              x + y * green,
                              x + y * blue,
                              1.0
                        );
                  }
            </script>

            <script id="vs" type="x-shader/x-vertex">
                  attribute vec3 position;

                  void main(void) {
                        gl_Position = vec4(position, 1.0);
                  }
            </script>

            <!-- Scripts -->
            <script src="main.js" type="text/javascript"></script>
      </body>
</html>
